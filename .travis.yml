sudo: false

language: python

python:
  - 2.7
  - 3.3

env:
  - DJANGO=1.4
  - DJANGO=1.5
  - DJANGO=1.6
  - DJANGO=1.7
  - DJANGO=1.8

matrix:
  exclude:
    - python: 3.3
      env: DJANGO=1.4
    - python: 3.3
      env: DJANGO=1.5
    - python: 3.3
      env: DJANGO=1.6
  include:
    - python: 2.7
      env: FLAKE8=1

before_install:
  - if [ -z "$DJANGO" ]; then export DJANGO=1.6; fi

install:
  - pip install -q Django==$DJANGO --use-mirrors
  - pip install -r requirements.txt --use-mirrors
  - pip install flake8 --use-mirrors

script:
  - if [ -z "$FLAKE8" ]; then ./runtests.py; else flake8; fi